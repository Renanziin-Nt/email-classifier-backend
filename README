Email Classifier API

Uma API inteligente para classificaÃ§Ã£o automÃ¡tica de emails em categorias produtivas e improdutivas, com geraÃ§Ã£o de respostas automatizadas usando tÃ©cnicas de Processamento de Linguagem Natural (NLP) e Machine Learning.
ğŸš€ Funcionalidades

    ğŸ“¨ ClassificaÃ§Ã£o de Emails: Identifica se um email Ã© "Produtivo" ou "Improdutivo"

    ğŸ¤– GeraÃ§Ã£o de Respostas: Sugere respostas automÃ¡ticas contextualizadas

    ğŸ“ Suporte a MÃºltiplos Formatos: Processa texto direto, arquivos TXT e PDF

    âš¡ Processamento AssÃ­ncrono: Sistema de jobs com polling adaptativo

    ğŸ¯ Modelo de ML Integrado: Usa Logistic Regression com TF-IDF para classificaÃ§Ã£o

    ğŸ”Œ API de IA: IntegraÃ§Ã£o com Gemini AI e Hugging Face opcionais

ğŸ› ï¸ Tecnologias Utilizadas

    Python 3.12 - Linguagem principal

    FastAPI - Framework web moderno e rÃ¡pido

    Scikit-learn - Machine Learning para classificaÃ§Ã£o

    NLTK - Processamento de Linguagem Natural

    Google Gemini AI - GeraÃ§Ã£o de respostas inteligentes (opcional)

    Hugging Face - Modelos de NLP (opcional)

    Uvicorn - Servidor ASGI de alta performance

ğŸ“¦ InstalaÃ§Ã£o
PrÃ©-requisitos

    Python 3.12 ou superior

    pip (gerenciador de pacotes Python)

ConfiguraÃ§Ã£o do Ambiente

    Clone o repositÃ³rio:

bash

git clone https://github.com/seu-usuario/email-classifier-backend.git
cd email-classifier-backend

    Crie um ambiente virtual:

bash

python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows

    Instale as dependÃªncias:

bash

pip install -r requirements.txt

    Baixe os recursos do NLTK:

bash

python -c "
import nltk
nltk.download('punkt')
nltk.download('stopwords')
nltk.download('punkt_tab')
nltk.download('rslp')
print('âœ… Recursos NLTK instalados!')
"

    Configure variÃ¡veis de ambiente (opcional):

bash

cp .env.example .env
# Edite o .env com suas chaves API

ğŸ”§ ConfiguraÃ§Ã£o
VariÃ¡veis de Ambiente

Crie um arquivo .env na raiz do projeto:
env

# Chave da API Gemini (opcional)
GEMINI_API_KEY=your_gemini_api_key_here

# Chave da API Hugging Face (opcional)
HF_API_KEY=your_huggingface_api_key_here

# ConfiguraÃ§Ãµes do servidor
HOST=0.0.0.0
PORT=8000
DEBUG=True

Chaves API Opcionais

    Gemini AI: Para geraÃ§Ã£o de respostas mais inteligentes

    Hugging Face: Para classificaÃ§Ã£o usando modelos prÃ©-treinados

Nota: O sistema funciona perfeitamente sem essas chaves, usando o modelo ML local.
ğŸš€ ExecuÃ§Ã£o
Desenvolvimento
bash

uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

ProduÃ§Ã£o
bash

uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4

Com Docker
bash

docker build -t email-classifier-api .
docker run -p 8000:8000 email-classifier-api

ğŸ“š API Endpoints
POST /classify-email

Inicia o processamento de um email.

Body options:

    text: Texto direto do email

    file: Arquivo TXT ou PDF (multipart/form-data)

Response:
json

{
  "job_id": "uuid-do-job",
  "status": "pending",
  "message": "Job criado com sucesso"
}

GET /job-status/{job_id}

Verifica o status de um job.

Response:
json

{
  "job_id": "uuid-do-job",
  "status": "completed",
  "progress": 100,
  "current_step": "Processamento concluÃ­do",
  "message": "Email classificado com sucesso",
  "result": {
    "category": "Produtivo",
    "suggested_response": "Resposta gerada...",
    "confidence": 0.92,
    "processed_text": "Texto processado...",
    "original_length": 250
  }
}

GET /health

Verifica o status da API.

Response:
json

{
  "status": "healthy",
  "version": "1.0.0",
  "active_jobs": 3
}

DELETE /job/{job_id}

Remove um job da memÃ³ria.
ğŸ§ª Exemplos de Uso
Via cURL

Classificar texto direto:
bash

curl -X POST "http://localhost:8000/classify-email" \
  -H "Content-Type: application/json" \
  -d '{"text": "Preciso de ajuda com um erro no sistema urgente"}'

Classificar arquivo:
bash

curl -X POST "http://localhost:8000/classify-email" \
  -F "file=@email.pdf" \
  -H "Content-Type: multipart/form-data"

Verificar status:
bash

curl "http://localhost:8000/job-status/SEU_JOB_ID_AQUI"

Via Python
python

import requests

# Classificar email
response = requests.post("http://localhost:8000/classify-email", 
    json={"text": "OlÃ¡, preciso de suporte tÃ©cnico"}
)

job_id = response.json()["job_id"]

# Verificar status
status = requests.get(f"http://localhost:8000/job-status/{job_id}")
print(status.json())

ğŸ—ï¸ Estrutura do Projeto
text

email-classifier-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                 # AplicaÃ§Ã£o FastAPI principal
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ schemas.py          # Modelos Pydantic
â”‚   â”‚   â””â”€â”€ ml_model.py         # Modelo de Machine Learning
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ai_service.py       # ServiÃ§o de IA principal
â”‚   â”‚   â”œâ”€â”€ classifier.py       # ClassificaÃ§Ã£o de emails
â”‚   â”‚   â”œâ”€â”€ response_generator.py # GeraÃ§Ã£o de respostas
â”‚   â”‚   â””â”€â”€ email_processor.py  # Processamento de texto
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ logging_utils.py    # UtilitÃ¡rios de logging
â”œâ”€â”€ models/
â”‚   â””â”€â”€ classifier_model.pkl    # Modelo ML treinado (gerado automaticamente)
â”œâ”€â”€ requirements.txt            # DependÃªncias do projeto
â”œâ”€â”€ .env.example               # Exemplo de variÃ¡veis de ambiente
â””â”€â”€ README.md                  # Este arquivo

ğŸ¯ Modelo de Machine Learning

O sistema utiliza um modelo Logistic Regression com TF-IDF Vectorizer treinado com exemplos de emails produtivos e improdutivos.

CaracterÃ­sticas:

    âœ… Treinado com 40+ exemplos categorizados

    âœ… ValidaÃ§Ã£o cruzada integrada

    âœ… PersistÃªncia automÃ¡tica (arquivo .pkl)

    âœ… Fallback para anÃ¡lise heurÃ­stica

ğŸ” Tipos de ClassificaÃ§Ã£o
ğŸ“ˆ Emails Produtivos

    SolicitaÃ§Ãµes de suporte tÃ©cnico

    Problemas e erros reportados

    DÃºvidas sobre o sistema

    SolicitaÃ§Ãµes de status

    QuestÃµes financeiras

ğŸ’¬ Emails Improdutivos

    Mensagens de agradecimento

    FelicitaÃ§Ãµes e cumprimentos

    Mensagens sociais

    Feedback positivo

    ComunicaÃ§Ãµes informais

âš¡ Performance

    Tempo de resposta: < 2 segundos para emails tÃ­picos

    ConcorrÃªncia: Suporte a mÃºltiplos jobs simultÃ¢neos

    Escalabilidade: Arquitetura preparada para horizontal scaling

ğŸ› SoluÃ§Ã£o de Problemas
Erros Comuns

    CORS Blocked: Verifique se o frontend estÃ¡ na lista de origens permitidas

    NLTK Resources: Execute o download dos recursos do NLTK

    Memory Issues: Jobs antigos sÃ£o automaticamente limpos

Logs e Debug

Ative o modo debug para logs detalhados:
bash

export DEBUG=True
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

ğŸ¤ ContribuiÃ§Ã£o

    Fork o projeto

    Crie uma branch para sua feature (git checkout -b feature/AmazingFeature)

    Commit suas mudanÃ§as (git commit -m 'Add some AmazingFeature')

    Push para a branch (git push origin feature/AmazingFeature)

    Abra um Pull Request

ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo LICENSE para detalhes.
ğŸ† Reconhecimentos

    FastAPI por fornecer um framework web excepcional

    Scikit-learn por ferramentas incrÃ­veis de Machine Learning

    Google Gemini por modelos de IA generativa

    Hugging Face por democratizar o NLP